<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stack</title>
  </head>
  <body>
    <h1>Manipulate JS Array as Stack</h1>
    <div id="stack-info"></div>
    <p id="stack-message"></p>
    <hr />
    <button onclick="pushElement()">Push</button>
    <button onclick="popElement()">Pop</button>
    <button onclick="findElement()">Find</button>
    <button onclick="countElements()">Count Numbers</button>
    <button onclick="toFixedElements()">To Fixed</button>
    <button onclick="sumElements()">Sum</button>

    <hr />
    <script>
      const STACK_SIZE = 10;
      const myStack = new Array(STACK_SIZE);
      var stackTopIndex = -1;

      let stackInfoElement = document.getElementById("stack-info");

      function updateStackInfo() {
        stackInfoElement.innerHTML = `
         <p>Stack Size: ${STACK_SIZE}</p>
         <p>Current Size: ${length(myStack)}</p>
         <p>Stack Elements: [${myStack
           .filter((element, index) => index <= stackTopIndex)
           .join(", ")}]</p>`;
      }

      function pushElement() {
        let element = parseFloat(prompt("Enter a number to push:"));
        push(element);
        updateStackInfo();
      }

      function push(element) {
        if (stackTopIndex === STACK_SIZE - 1) {
          alert("Stack is Full.");
          return;
        }
        if (typeof element != "number" || isNaN(element)) {
          alert("Only numbers can be pushed.");
          return;
        }
        myStack[++stackTopIndex] = element;
      }

      function popElement() {
        let poppedElement = pop();
        updateStackInfo();
        if (poppedElement !== undefined)
          document.getElementById(
            "stack-message"
          ).innerText = `Popped Element: ${poppedElement}`;
        else document.getElementById("stack-message").innerText = "";
      }

      /**
       * @param {Array} myStack The stack array
       * @returns {number | null} Returns the popped element
       */
      function pop() {
        if (stackTopIndex == -1) {
          alert("Stack is Empty.");
          return;
        }
        return myStack[stackTopIndex--];
      }

      function findElement() {
        let element = parseFloat(prompt("Enter a number to find:"));
        let result = find(element);
        if (result !== undefined)
          document.getElementById(
            "stack-message"
          ).innerText = `Found Element: ${result.element} at Index: ${result.index}`;
        else alert("Element not found in stack.");
      }

      function find(searchElement) {
        for (let i = 0; i <= stackTopIndex; i++) {
          if (myStack[i] === searchElement)
            return { index: i, element: myStack[i] };
        }
      }

      function length() {
        return stackTopIndex + 1;
      }

      function isFloat(number) {
        return Number.isFinite(number) && !Number.isInteger(number);
      }

      function isInteger(number) {
        return number % 1 === 0;
      }

      function countElements() {
        let [numIntegers, numFloats] = count();
        document.getElementById(
          "stack-message"
        ).innerText = `Count -> Integers: ${numIntegers}, Floats: ${numFloats}`;
      }

      function count() {
        let numIntegers = 0,
          numFloats = 0;
        for (let i = 0; i <= stackTopIndex; i++) {
          if (isInteger(myStack[i])) numIntegers++;
          else if (isFloat(myStack[i])) numFloats++;
        }
        return [numIntegers, numFloats];
      }

      function toFixedElements() {
        var digits = parseInt(prompt("Enter number of digits for toFixed:"));
        if (isNaN(digits) || digits < 0) {
          alert("Please enter a valid non-negative integer.");
          return;
        }
        toFixedStack(digits);
        updateStackInfo();
      }

      function toFixedStack(digits) {
        for (let i = 0; i <= stackTopIndex; i++) {
          if (isFloat(myStack[i])) {
            myStack[i] = Number(myStack[i].toFixed(digits));
          }
        }
      }

      function sumElements() {
        let total = sum();
        document.getElementById(
          "stack-message"
        ).innerText = `Sum of Elements: ${total}`;
      }

      function sum() {
        let total = 0;
        for (let i = 0; i <= stackTopIndex; i++) {
          if (typeof myStack[i] === "number" && !isNaN(myStack[i])) {
            total += myStack[i];
          }
        }
        return total;
      }

      updateStackInfo();
    </script>
  </body>
</html>
